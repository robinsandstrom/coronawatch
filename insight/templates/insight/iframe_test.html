<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0 minimal-ui"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.14.0/css/mdb.min.css" rel="stylesheet">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-160071660-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-160071660-1');
    </script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://www.amcharts.com/lib/4/core.js"></script>
    <script src="https://www.amcharts.com/lib/4/charts.js"></script>
    <script src="https://www.amcharts.com/lib/4/themes/dark.js"></script>
    <script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>
    <script src="https://www.amcharts.com/lib/4/maps.js"></script>
    <script src="https://www.amcharts.com/lib/4/geodata/usaLow.js"></script>
    {% load static %}
    <script rel="{% static 'swe.js' %}"></script>
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <link rel="stylesheet" href="{% static 'bootstrap-grid.css' %}">
    <link rel="stylesheet" href="{% static 'bootstrap.min.css' %}">
    <link rel="shortcut icon" type="image/png" href="{% static 'favicon.ico' %}"/>
    <title>Coronawatch: {{ total }} (+ {{new_cases}} nya fall)</title>

    <meta property="og:title" content="Coronawatch.se" />
    <meta property="og:description" content="Utvecklingen av CoVid-19 i Sverige"/>
    <meta property="og:type" content="Senaste prognos" />
    <meta property="og:url" content="https://www.coronawatch.se/" />
    <meta property="og:image" content="static/graph2.png" />
</head>
<body>
    <div class="row" style="min-height: 100vh;">
        <div class="col-md-12">
            <div class="card">
                <div id="bar_chart" class="chartdiv"></div>
            </div>
        </div>
    </div>

</body>



<style media="screen">
    <style media="screen">


        .chartdiv {
             width: 100%;
             height: 40vh;
        }
</style>

<script>
am4core.ready(function() {

    // Themes begin
    am4core.useTheme(am4themes_dark);

    function createMapChart(data){
        var chart = am4core.create("bar_chart", am4charts.XYChart);

        var chart_data = [];

        {% for key,value in agg_by_dates.items %}
            value = parseInt({{value}})
            var today = new Date();
            var seriesdate = Date.parse('{{key}}');

            if(seriesdate<today){
                var dataItem = {date: seriesdate,  value: value};
                chart_data.push(dataItem);
            }
        {% endfor %}

        // Create axes
        var dateAxis = chart.xAxes.push(new am4charts.DateAxis());

        var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

        // Create series
        var series = chart.series.push(new am4charts.ColumnSeries());

        series.dataFields.valueY = "value" ;
        series.dataFields.dateX = "date";
        series.name = name;
        //series.stroke = am4core.color('#e65100');
        //series.f= am4core.color("#ffecb3");

        series.data = chart_data;

        series.columns.template.tooltipText = "{dateX}: [bold]{valueY}[/] Nya smittade";
        series.columns.template.fillOpacity = .85;

        var columnTemplate = series.columns.template;
        columnTemplate.strokeWidth = 2;
        columnTemplate.strokeOpacity = 1;

        let scrollbarX = new am4core.Scrollbar();
        scrollbarX.marginBottom = 20;
        chart.scrollbarX = scrollbarX;
        scrollbarX.interactionsEnabled = false;
        chart.scrollbarX.disabled = true;
        chart.scrollbarX.startGrip.disabled = true;
        chart.scrollbarX.endGrip.disabled = true;
        chart.seriesContainer.draggable = false;
        chart.seriesContainer.resizable = false;
        chart.mouseWheelBehavior = "none";
        chart.responsive.enabled = true;
        }
    }); // end am4core.ready()
</script>
